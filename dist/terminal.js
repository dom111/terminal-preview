(()=>{var i={bg:"49",fg:"39",bold:!1,dim:!1,italic:!1,underline:!1,blink:!1,overline:!1,invert:!1,hidden:!1,strikethrough:!1},c={...i},g=n=>{let t={...i};return n=n.replace(/\b48;5;(\d+)\b/,"48_5_$1").replace(/\b38;5;(\d+)\b/,"38_5_$1").replace(/\b48;2;(\d+);(\d+);(\d+)\b/,"48_2_$1_$2_$3").replace(/\b38;2;(\d+);(\d+);(\d+)\b/,"38_2_$1_$2_$3"),n.split(/;/).forEach(s=>{let e;(s==="0"||s==="")&&(t={...c}),s==="1"&&(t.bold=!0),s==="2"&&(t.dim=!0),s==="3"&&(t.italic=!0),s==="4"&&(t.underline=!0),s==="5"&&(t.blink=!0),s==="6"&&(t.overline=!0),s==="7"&&(t.invert=!0),s==="8"&&(t.hidden=!0),s==="9"&&(t.strikethrough=!0),s==="21"&&(t.bold=!1),s==="22"&&(t.dim=!1),s==="23"&&(t.italic=!1),s==="24"&&(t.underline=!1),s==="25"&&(t.blink=!1),s==="26"&&(t.overline=!1),s==="27"&&(t.invert=!1),s==="28"&&(t.hidden=!1),s==="29"&&(t.strikethrough=!1),(e=s.match(/^38_2_(\d+)_(\d+)_(\d+)$/))?t.fg=l("true-"+e.slice(1).join("-")):(e=s.match(/^38_5_(\d+)$/))?t.fg=l("256-"+e[1]):(e=s.match(/^(3|9)[0-79]$/))&&(t.fg=s),(e=s.match(/^^48_2_(\d+)_(\d+)_(\d+)$/))?t.bg=l("true-"+e.slice(1).join("-"),!0):(e=s.match(/^48_5_(\d+)$/))?t.bg=l("256-"+e[1],!0):(e=s.match(/^(4|10)[0-79]$/))&&(t.bg=s)}),t},l=(n,t=!1)=>{let s=t?"4":"3",e=t?"10":"9",a;return(a=n.match(/^true-(\d+)-(\d+)-(\d+)/))&&(a=x([parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)],!0))&&(n="256-"+a),(a=n.match(/^256-(\d+)/))&&(parseInt(a[1],10)<16?parseInt(a[1],10)<8?n=s+a[1]:n=e+parseInt(a[1],10)%8:a[1]==="16"?n=s+"0":a[1]==="231"&&(n=e+"7")),n};var y=n=>{let t={stylingReset:/^(?:\\\[)?(?:\\033|\\e|\\x1[bB]|\x1b)\[(0|)m(?:\\])?/,styling:/^(?:\\\[)?(?:\\033|\\e|\\x1[bB]|\x1b)\[([^m]*)m(?:\\])?/,command:/^(?:\\\[)?(?:\\?`([^`]+)\\?`|\\?\$\(([^)]+)\))(?:\\])?/,octal:/^\\(\d{3})/,hex:/^\\x([0-9a-fA-F]{2})/,token:/^( |\\[!#$@\\0aAdehHjlnsTtuvVWw])/,variable:/^\${?(\w+|\?)}?/,text:/^([\S\s])/},s=[],e,a,r;for(;n;)r=!1,Object.entries(t).forEach(([o,f])=>{!r&&(e=n.match(f))&&(r=!0,o==="text"&&s.length&&(a=s[s.length-1]).type==="text"?(a.content+=e[0],a.value+=e[0]):o==="command"?s.push({type:o,content:e[0],value:e[1]||e[2]||"",wrap:!!(e[0].match(/^\\\[/)&&e[0].match(/\\]$/))}):s.push({type:o,content:e[0],value:e[1],wrap:!!(e[0].match(/^\\\[/)&&e[0].match(/\\]$/))}),n=n.replace(f,""))});return s},b=n=>{let t="",s=()=>{let e=[];return i.invert?(e.push("bg-"+i.fg),e.push("fg-"+i.bg)):(e.push("bg-"+i.bg),e.push("fg-"+i.fg)),["bold","dim","italic","underline","overline","strikethrough","blink","hidden"].forEach(a=>{i[a]&&e.push(a)})," "+e.join(" ")};return i={...c},n.forEach(e=>{let a=r=>(r||"").replace(/"/g,"&quot;");e.type.match(/styling/)?(t.match(/<span class="block styling/)&&(t+="</span>"),e.style=g(e.value),i={...i,...e.style},t+='<span class="block styling'+s()+'" data-content="'+a(e.content)+'" data-value="'+a(e.value)+'" data-type="'+e.type+'" style="'+((e.style.fg+"").match(/true-/)?(e.style.fg+"").replace(/true-/,"color: rgb(").replace(/$/,");").replace(/\-/g,","):"")+((e.style.bg+"").match(/true-/)?(e.style.bg+"").replace(/\-/g,",").replace(/true,/,"background-color: rgb(").replace(/$/,")"):"")+'"><span class="content">'+e.content+"</span>"):e.type==="command"?t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(e.value)+'"><span class="content">'+(e.wrap?'<span class="wrap">\\[</span>':"")+"$("+e.value+")"+(e.wrap?'<span class="wrap">\\]</span>':"")+"</span></span>":e.type==="token"?t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(e.value)+'" data-type="'+e.type+'"><span class="content">'+e.content+"</span></span>":e.type==="text"?t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(e.value)+'" data-type="'+e.type+'">'+e.content+"</span>":e.type==="variable"?t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(e.value)+'" data-type="'+e.type+'"><span class="content">'+e.content+"</span></span>":e.type==="hex"?t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(String.fromCharCode(parseInt(e.value,16)))+'" data-type="'+e.type+'"><span class="content">'+e.content+"</span></span>":e.type==="octal"&&(t+='<span class="block '+e.type+'" data-content="'+a(e.content)+'" data-value="'+a(String.fromCharCode(parseInt(e.value,8)))+'" data-type="'+e.type+'"><span class="content">'+e.content+"</span></span>")}),t+='<span class="cursor"></span>',t.match(/<span class="block styling/)&&(t+="</span>"),t},T=n=>b(y(n)),u=(()=>{let n=[];return n.push([0,0,0,0]),n.push([128,0,0,1]),n.push([0,128,0,2]),n.push([128,128,0,3]),n.push([0,0,128,4]),n.push([128,0,128,5]),n.push([0,128,128,6]),n.push([192,192,192,7]),n.push([128,128,128,8]),n.push([255,0,0,9]),n.push([0,255,0,10]),n.push([255,255,0,11]),n.push([0,0,255,12]),n.push([255,0,255,13]),n.push([0,255,255,14]),n.push([255,255,255,15]),[0,95,135,175,215,255].forEach(t=>{[0,95,135,175,215,255].forEach(s=>{[0,95,135,175,215,255].forEach(e=>{n.push([t,s,e,16+parseInt(""+Math.floor(t/255*5)+Math.floor(s/255*5)+Math.floor(e/255*5),6)])})})}),[8,18,28,38,48,58,68,78,88,98,108,118,128,138,148,158,168,178,188,198,208,218,228,238].forEach(t=>{n.push([t,t,t,232+Math.floor(t/10)])}),n})(),S=(n,t)=>n.slice(0).sort((s,e)=>Math.abs(s[0]-t[0])+Math.abs(s[1]-t[1])+Math.abs(s[2]-t[2])-(Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2]))||s[3]-e[3])[0];var x=(n,t=!1)=>t?(u.filter(e=>e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])[0]||[])[3]??null:(S(u,n)||[])[3]??null;var d=T;var h=n=>{let t=window.getSelection(),s=r=>{let o=[];for(;r.parentNode!==document;)o.push(r.parentNode),r=r.parentNode;return o};if(t===null)return 0;let e=-1,a;if(t.focusNode&&s(t.focusNode).some(r=>r===n)){for(a=t.focusNode,e=t.focusOffset;a&&a!==n;)if(a.previousSibling)a=a.previousSibling,e+=(a.textContent??"").length;else if(a=a.parentNode,!a)break}return e},m=(n,t)=>{let s=(e,a,r=null)=>{if(r===null&&(r=document.createRange(),r.selectNode(e),r.setStart(e,0)),a.count===0)r.setEnd(e,a.count);else if(e&&a.count>0)if(e.nodeType===Node.TEXT_NODE)(e.textContent??"").length<a.count?a.count-=(e.textContent??"").length:(r.setEnd(e,a.count),a.count=0);else for(let o=0;o<e.childNodes.length&&(r=s(e.childNodes[o],a,r),a.count!==0);o++);return r};if(t>=0){let e=window.getSelection(),a=s(n,{count:t});return e===null?void 0:a?(a.collapse(!1),e.removeAllRanges(),e.addRange(a),!0):!1}};var p=n=>{let t=()=>{n.classList.add("mutating");let s=d(n.innerText);if(n.innerHTML!==s){let e=h(n);n.innerHTML=s,m(n,e)}requestAnimationFrame(()=>n.classList.remove("mutating"))};n.classList.contains("mutating")||(n.classList.contains("change-event-bound")||(n.addEventListener("input",()=>t()),n.classList.add("change-event-bound")),t())},E=new MutationObserver(n=>{for(let{target:t}of n){if(!(t instanceof HTMLElement))continue;let s=t.querySelectorAll(".terminal");if(s.length){s.forEach(e=>p(e));continue}t.matches(".terminal")&&p(t)}});E.observe(document,{childList:!0,subtree:!0});document.querySelectorAll(".terminal").forEach(n=>p(n));var v=p;})();
//# sourceMappingURL=terminal.js.map
